
<!DOCTYPE doctype html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<link href="https://openemail.io/prerequisite-dns/" rel="canonical"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="../images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.0.4, mkdocs-material-4.0.2" name="generator"/>
<title>DNS Setup - Openemail Deployers Guide</title>
<link href="../assets/stylesheets/application.982221ab.css" rel="stylesheet"/>
<link href="../assets/stylesheets/application-palette.224b79ff.css" rel="stylesheet"/>
<meta content="#009688" name="theme-color"/>
<script src="../assets/javascripts/modernizr.1f0bcf2b.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono" rel="stylesheet"/>
<style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
<link href="../assets/fonts/material-icons.css" rel="stylesheet"/>
<link href="../extra.css" rel="stylesheet"/>
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-136239070-1", "openemail.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="light-green" data-md-color-primary="teal" dir="ltr">
<svg class="md-svg">
<defs>
<svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg">
<path d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" fill="currentColor"></path>
</svg>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a class="md-skip" href="#dns-and-email-security" tabindex="1">
        Skip to content
      </a>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a class="md-header-nav__button md-logo" href="https://openemail.io" title="Openemail Deployers Guide">
<img height="24" src="../images/logo.png" width="24"/>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
              Openemail Deployers Guide
            </span>
<span class="md-header-nav__topic">
              DNS Setup
            </span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/openemail/openemail-docs/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    openemail/openemail
  </div>
</a>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="https://openemail.io" title="Openemail Deployers Guide">
<img height="48" src="../images/logo.png" width="48"/>
</a>
    Openemail Deployers Guide
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/openemail/openemail-docs/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    openemail/openemail
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href=".." title="Product Overview and Support">
      Product Overview and Support
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Prerequisites
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-2">
        Prerequisites
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../prerequisite-system/" title="Prepare Your System">
      Prepare Your System
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        DNS Setup
      </label>
<a class="md-nav__link md-nav__link--active" href="./" title="DNS Setup">
      DNS Setup
    </a>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#dns-and-email-security" title="DNS and Email Security">
    DNS and Email Security
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-up-mx-records" title="Setting up MX Records">
    Setting up MX Records
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-mx-records" title="Sample MX Records">
    Sample MX Records
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-a-records-for-mx-ips" title="Sample A Records for MX IPS">
    Sample A Records for MX IPS
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reverse-dns-for-your-mx-ips" title="Reverse DNS for Your MX IPs">
    Reverse DNS for Your MX IPs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-ptr-records" title="Sample PTR Records">
    Sample PTR Records
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#auto-configuration-of-ssl-certificates" title="Auto Configuration of SSL certificates">
    Auto Configuration of SSL certificates
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-ssl-autoconfig-and-autodiscover" title="Sample SSL Autoconfig and Autodiscover">
    Sample SSL Autoconfig and Autodiscover
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-up-spf-records" title="Setting up SPF Records">
    Setting up SPF Records
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-spf-record" title="Sample SPF record">
    Sample SPF record
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#querying-for-spf-records" title="Querying for SPF Records">
    Querying for SPF Records
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-up-dkim-record" title="Setting UP DKIM Record">
    Setting UP DKIM Record
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-a-dkim-key-and-dns-record" title="Creating a DKIM Key and DNS Record">
    Creating a DKIM Key and DNS Record
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-dkim-key-in-openemail-ui" title="Creating DKIM key in Openemail UI">
    Creating DKIM key in Openemail UI
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-opendkim" title="Using OpenDKIM">
    Using OpenDKIM
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setup-dmarc-record" title="Setup DMARC Record">
    Setup DMARC Record
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-dmarc-record" title="Sample DMARC Record">
    Sample DMARC Record
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-advanced-dns-configuration" title="The Advanced DNS Configuration">
    The Advanced DNS Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-for-spf-dkim-and-dmarc" title="Testing for SPF, DKIM, and DMARC">
    Testing for SPF, DKIM, and DMARC
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#getting-additional-statistics" title="Getting Additional Statistics">
    Getting Additional Statistics
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#additional-references" title="Additional References">
    Additional References
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Installation and Update
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-3">
        Installation and Update
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../install/" title="Installation">
      Installation
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../install-update/" title="Update">
      Update
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      First Steps
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-4">
        First Steps
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-ssl/" title="SSL">
      SSL
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-rspamd_ui/" title="Rspamd Web UI">
      Rspamd Web UI
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-rp/" title="Reverse Proxy">
      Reverse Proxy
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-snat/" title="SNAT">
      SNAT
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-disable_ipv6/" title="Disable IPv6">
      Disable IPv6
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-relayhost/" title="Setup A Relayhost">
      Setup A Relayhost
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-logging/" title="Logging">
      Logging
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-local_mta/" title="Local MTA on Docker Host">
      Local MTA on Docker Host
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firststeps-sync_jobs_migration/" title="Sync Jobs Migration">
      Sync Jobs Migration
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" id="nav-5" type="checkbox"/>
<label class="md-nav__link" for="nav-5">
      Models
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-5">
        Models
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../model-sender_rcv/" title="Sender and Receiver Model">
      Sender and Receiver Model
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../model-acl/" title="ACL">
      ACL
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" id="nav-6" type="checkbox"/>
<label class="md-nav__link" for="nav-6">
      Debugging and Troubleshooting
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-6">
        Debugging and Troubleshooting
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../debug/" title="Introduction">
      Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debug-logs/" title="Logs">
      Logs
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debug-attach_service/" title="Attach a Container">
      Attach a Container
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debug-reset_pw/" title="Reset Passwords">
      Reset Passwords
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debug-rm_volumes/" title="Remove Persistent Data">
      Remove Persistent Data
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debug-common_problems/" title="Common Problems">
      Common Problems
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" id="nav-7" type="checkbox"/>
<label class="md-nav__link" for="nav-7">
      Backup and Restore
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-7">
        Backup and Restore
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" id="nav-7-1" type="checkbox"/>
<label class="md-nav__link" for="nav-7-1">
      Helper script
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-7-1">
        Helper script
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../b_n_r_backup/" title="Backup">
      Backup
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../b_n_r_restore/" title="Restore">
      Restore
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" id="nav-7-2" type="checkbox"/>
<label class="md-nav__link" for="nav-7-2">
      Manually
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-7-2">
        Manually
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-backup_restore-maildir/" title="Maildir">
      Maildir
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-backup_restore-mysql/" title="MySQL">
      MySQL
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" id="nav-8" type="checkbox"/>
<label class="md-nav__link" for="nav-8">
      Usage and Examples
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-8">
        Usage and Examples
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" id="nav-8-1" type="checkbox"/>
<label class="md-nav__link" for="nav-8-1">
      Openemail UI
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-8-1">
        Openemail UI
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-openemail_ui-config/" title="Configuration">
      Configuration
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-openemail_ui-bl_wl/" title="Blacklist / Whitelist">
      Blacklist / Whitelist
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-openemail_ui-spamfilter/" title="Spamfilter">
      Spamfilter
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-openemail_ui-spamalias/" title="Temporary Email Aliases">
      Temporary Email Aliases
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-openemail_ui-tagging/" title="Tagging">
      Tagging
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-openemail_ui-tfa/" title="Two-Factor Authentication">
      Two-Factor Authentication
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" id="nav-8-2" type="checkbox"/>
<label class="md-nav__link" for="nav-8-2">
      Postfix
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-8-2">
        Postfix
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-postfix-anonym_headers/" title="Anonymize Headers">
      Anonymize Headers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-postfix-disable_sender_verification/" title="Disable Sender Addresses Verification">
      Disable Sender Addresses Verification
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-postfix-attachment_size/" title="Maximum Message Size or Attachment Size">
      Maximum Message Size or Attachment Size
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-postfix-pflogsumm/" title="Statistics with Pflogsumm">
      Statistics with Pflogsumm
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" id="nav-8-3" type="checkbox"/>
<label class="md-nav__link" for="nav-8-3">
      Unbound
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-8-3">
        Unbound
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-unbound-fwd/" title="Using An External DNS Service">
      Using An External DNS Service
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" id="nav-8-4" type="checkbox"/>
<label class="md-nav__link" for="nav-8-4">
      Dovecot
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-8-4">
        Dovecot
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-any_acl/" title="Enable Any and All Authenticated ACL Settings">
      Enable Any and All Authenticated ACL Settings
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-expunge/" title="Expunge a User's Mails">
      Expunge a User's Mails
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-mail-crypt/" title="Mail Crypt">
      Mail Crypt
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-more/" title="More Examples with DOVEADM">
      More Examples with DOVEADM
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-vmail-volume/" title="Move Vmail Volume">
      Move Vmail Volume
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-idle_interval/" title="IMAP IDLE Interval">
      IMAP IDLE Interval
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-dovecot-fts/" title="FTS and Solr">
      FTS and Solr
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-nginx/" title="Nginx">
      Nginx
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-redis/" title="Redis">
      Redis
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-rspamd/" title="Rspamd">
      Rspamd
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-sogo/" title="SOGo">
      SOGo
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-9" id="nav-8-9" type="checkbox"/>
<label class="md-nav__link" for="nav-8-9">
      Docker
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-8-9">
        Docker
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-docker-cust_dockerfiles/" title="Customize Dockerfiles">
      Customize Dockerfiles
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-docker-dc_bash_compl/" title="Docker Compose Bash Completion">
      Docker Compose Bash Completion
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-why_unbound/" title="Why unbound?">
      Why unbound?
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-autodiscover_config/" title="Autodiscover and  Autoconfig">
      Autodiscover and  Autoconfig
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-80_to_443/" title="Redirect HTTP to HTTPS">
      Redirect HTTP to HTTPS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-change_config/" title="Adjust Service Configurations">
      Adjust Service Configurations
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../u_e-deinstall/" title="Deinstall">
      Deinstall
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" id="nav-9" type="checkbox"/>
<label class="md-nav__link" for="nav-9">
      Client Configuration
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-9">
        Client Configuration
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../client/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-android/" title="Android">
      Android
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-apple/" title="Apple macOS / iOS">
      Apple macOS / iOS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-emclient/" title="eM Client">
      eM Client
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-kontact/" title="KDE Kontact">
      KDE Kontact
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-outlook/" title="Microsoft Outlook">
      Microsoft Outlook
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-thunderbird/" title="Mozilla Thunderbird">
      Mozilla Thunderbird
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-windows/" title="Windows Mail">
      Windows Mail
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-windowsphone/" title="Windows Phone">
      Windows Phone
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../client/client-manual/" title="Manual configuration">
      Manual configuration
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" id="nav-10" type="checkbox"/>
<label class="md-nav__link" for="nav-10">
      Third Party Apps
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-10">
        Third Party Apps
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../third_party-thunderbird/" title="SOGo Integrator for Thunderbird">
      SOGo Integrator for Thunderbird
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../third_party-roundcube/" title="Roundcube">
      Roundcube
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../third_party-portainer/" title="Portainer">
      Portainer
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../third_party-gogs/" title="Gogs">
      Gogs
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../third_party-gitea/" title="Gitea">
      Gitea
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" id="nav-11" type="checkbox"/>
<label class="md-nav__link" for="nav-11">
      Nextcloud Integration
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-11">
        Nextcloud Integration
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../nextcloud-Introduction/" title="Introduction">
      Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../nextcloud-for-business/" title="Nextcloud for Your Business">
      Nextcloud for Your Business
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#dns-and-email-security" title="DNS and Email Security">
    DNS and Email Security
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-up-mx-records" title="Setting up MX Records">
    Setting up MX Records
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-mx-records" title="Sample MX Records">
    Sample MX Records
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-a-records-for-mx-ips" title="Sample A Records for MX IPS">
    Sample A Records for MX IPS
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reverse-dns-for-your-mx-ips" title="Reverse DNS for Your MX IPs">
    Reverse DNS for Your MX IPs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-ptr-records" title="Sample PTR Records">
    Sample PTR Records
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#auto-configuration-of-ssl-certificates" title="Auto Configuration of SSL certificates">
    Auto Configuration of SSL certificates
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-ssl-autoconfig-and-autodiscover" title="Sample SSL Autoconfig and Autodiscover">
    Sample SSL Autoconfig and Autodiscover
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-up-spf-records" title="Setting up SPF Records">
    Setting up SPF Records
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-spf-record" title="Sample SPF record">
    Sample SPF record
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#querying-for-spf-records" title="Querying for SPF Records">
    Querying for SPF Records
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-up-dkim-record" title="Setting UP DKIM Record">
    Setting UP DKIM Record
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-a-dkim-key-and-dns-record" title="Creating a DKIM Key and DNS Record">
    Creating a DKIM Key and DNS Record
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-dkim-key-in-openemail-ui" title="Creating DKIM key in Openemail UI">
    Creating DKIM key in Openemail UI
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-opendkim" title="Using OpenDKIM">
    Using OpenDKIM
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setup-dmarc-record" title="Setup DMARC Record">
    Setup DMARC Record
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sample-dmarc-record" title="Sample DMARC Record">
    Sample DMARC Record
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-advanced-dns-configuration" title="The Advanced DNS Configuration">
    The Advanced DNS Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-for-spf-dkim-and-dmarc" title="Testing for SPF, DKIM, and DMARC">
    Testing for SPF, DKIM, and DMARC
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#getting-additional-statistics" title="Getting Additional Statistics">
    Getting Additional Statistics
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#additional-references" title="Additional References">
    Additional References
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset"><a class="md-icon md-content__icon" download href="prerequisite-dns.pdf" title="PDF Export"></a>
<a class="md-icon md-content__icon" href="https://github.com/openemail/openemail-docs/edit/master/docs/prerequisite-dns.md" title="Edit this page"></a>
<h1>DNS Setup</h1>
<h2 id="dns-and-email-security">DNS and Email Security<a class="headerlink" href="#dns-and-email-security" title="Permanent link">¶</a></h2>
<p>DNS infrastructure of the Internet plays a major role in email security today. Proper DNS setup for your email domain requires prior to setting up <strong>Openemail</strong> for your domain.</p>
<p>This section of the document guides you in setting up <strong>recommended DNS records</strong>. While some are mandatory for a mail server (A, MX), others are recommended to build a good reputation score (TXT/SPF) or used for auto-configuration of mail clients (SRV).</p>
<h2 id="setting-up-mx-records">Setting up MX Records<a class="headerlink" href="#setting-up-mx-records" title="Permanent link">¶</a></h2>
<p><strong>Querying for Existing MX records</strong></p>
<p>Let's first first find your MX records by running the <code>dig</code> command in your Linux system. Run the following query to view the MX records for an eample domain <code>openemail.io</code>. Simply change this domain to your domains to query MX for your domain.</p>
<p><div class="codehilite"><pre><span></span>dig openemail.io MX +short
</pre></div>
You will get an output like below.
<div class="codehilite"><pre><span></span>15 hasuna.openemail.io.
10 mail.openemail.io.
</pre></div>
According to the above output the domain <code>openemal.io</code> has two <code>MX</code> records. The numbers <code>10</code> and <code>15</code> are respective <code>MX</code> priorities.</p>
<h3 id="sample-mx-records">Sample MX Records<a class="headerlink" href="#sample-mx-records" title="Permanent link">¶</a></h3>
<p>Use the below sample records to setup your <code>MX</code> Records
<div class="codehilite"><pre><span></span>@   IN    MX  10  maila.yourdomain.tld
@   IN    MX  20  mailb.yourdomain.tld
</pre></div>
The numbers 10 and 20 are the respective MX priorities which are used in delivering the mails. The MX records with lower priority will receive mails first.  </p>
<h3 id="sample-a-records-for-mx-ips">Sample A Records for MX IPS<a class="headerlink" href="#sample-a-records-for-mx-ips" title="Permanent link">¶</a></h3>
<p>Next you need to setup A records for your MX. Below is a Sample
<div class="codehilite"><pre><span></span>@   IN    A   maila     1.2.3.4
@   IN    A   mailb     4.5.6.7
</pre></div></p>
<h3 id="reverse-dns-for-your-mx-ips">Reverse DNS for Your MX IPs<a class="headerlink" href="#reverse-dns-for-your-mx-ips" title="Permanent link">¶</a></h3>
<p>Make sure that the PTR record of your IP matches the FQDN of your openemal host: <code>${OPENEMAIL_HOSTNAME}</code> <sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup>. This record is usually set at the provider you leased the IP (server) from.</p>
<p><strong>To find the IP of your <code>MX</code> run:</strong></p>
<p>Below is an example
<div class="codehilite"><pre><span></span>dig mail.openemail.io +short
</pre></div>
The above query should return an <code>IP</code> address like below.
<div class="codehilite"><pre><span></span>68.183.186.231
</pre></div>
<strong>To find your PTR record run:</strong>
<div class="codehilite"><pre><span></span>host  68.183.186.231
</pre></div>
You will get an output like Below</p>
<div class="codehilite"><pre><span></span>231.186.183.68.in-addr.arpa domain name pointer mail.openemail.io
</pre></div>
<h3 id="sample-ptr-records">Sample PTR Records<a class="headerlink" href="#sample-ptr-records" title="Permanent link">¶</a></h3>
<div class="codehilite"><pre><span></span>4.3.2.1.in-addr.arpa    IN    PTR   maila.yourdomain.tld.
7.6.5.4.in-addr.arpa.   IN    PTR   mailb.yourdomain.tld.
</pre></div>
<h2 id="auto-configuration-of-ssl-certificates">Auto Configuration of SSL certificates<a class="headerlink" href="#auto-configuration-of-ssl-certificates" title="Permanent link">¶</a></h2>
<p>For each domain that you will add to Openmail, it will try to resolve <code>autodiscover.ADDED_MAIL_DOMAIN</code> and <code>autoconfig.ADDED_MAIL_DOMAIN</code> to your servers IPv4 address. If it succeeds, these names will be added as SANs to the certificate request. The container <code>acme-openemail</code> is taking care of this process using Letsencrypt Certificate Authority. To learn more about this visit <a href="https://openemail.io/firststeps-ssl/">Firststeps SSL</a></p>
<h3 id="sample-ssl-autoconfig-and-autodiscover">Sample SSL Autoconfig and Autodiscover<a class="headerlink" href="#sample-ssl-autoconfig-and-autodiscover" title="Permanent link">¶</a></h3>
<p>Add these records to your DNS Zone as the per the sample below.</p>
<div class="codehilite"><pre><span></span>@   IN    A   autodiscover     1.2.3.4
@   IN    A   autodiscover     4.5.6.7
</pre></div>
<h2 id="setting-up-spf-records">Setting up SPF Records<a class="headerlink" href="#setting-up-spf-records" title="Permanent link">¶</a></h2>
<p>Haven’t we all received emails that seem to be from our bank, our credit card company or even from ourselves but they were fake emails? The way emails are structured, spammers can and often do falsify the ‘from email address’ to send these types of spoof / spam emails. This is where SPF comes into place!</p>
<p>Sender Policy Framework (SPF) is a validation system that allows ISPs and webmail servers (Gmail, Yahoo, etc) to check if the incoming mail has been sent from an authorized server. Using the IP address of the sending server and the DNS records of your domain, ISPs can check if the sending server is authorized. If email is coming from an unauthorized sender, the emails will be marked as spam!</p>
<p>Set up SPF to prevent spammers from sending unauthorized emails from your domain. This type of spamming is called spoofing. <a href="http://www.openspf.org/Project_Overview">Sender Policy Framework (SPF)</a> is an email security method to prevent spoofing from your domain.</p>
<p>An SPF record is a TXT record that lists the mail servers that are allowed to send email from your domain. Messages sent from a server that isn't the SPF record might be marked as spam. Adding the TXT record doesn’t affect your mail flow.</p>
<h3 id="sample-spf-record">Sample SPF record<a class="headerlink" href="#sample-spf-record" title="Permanent link">¶</a></h3>
<p><div class="codehilite"><pre><span></span>@   IN    TXT   "v=spf1 mx -all"
</pre></div>
Using "v=spf1 mx -all" authorizes any IP that is also a MX for the sending domain. If you use <code>~all</code> ,it means softfail which allows mail whether or not it matches the parameters in the record.</p>
<p>Please refer to <a href="http://www.openspf.org">SPF Project</a> for further reading.</p>
<h3 id="querying-for-spf-records">Querying for SPF Records<a class="headerlink" href="#querying-for-spf-records" title="Permanent link">¶</a></h3>
<p>`
<strong>To find out your current SPF settings run:</strong></p>
<p><div class="codehilite"><pre><span></span>$ dig TXT openemail.io +short
</pre></div>
You will get an output like below.</p>
<div class="codehilite"><pre><span></span>"v=spf1  mx -all"
</pre></div>
<h2 id="setting-up-dkim-record">Setting UP DKIM Record<a class="headerlink" href="#setting-up-dkim-record" title="Permanent link">¶</a></h2>
<p>Use the <a href="http://www.dkim.org/">DomainKeys Identified Mail (DKIM) standard</a> to help prevent email spoofing on outgoing messages.</p>
<p>The acronym DKIM stands for “Domain Keys Identified Mail”. It is an encryption authentication method that is used by many ISPs to establish if the email originated from an authorized system and prevents spammers from stealing the identity of legitimate entities.</p>
<p><strong>How does it work exactly?</strong></p>
<p>DKIM allows for a unique signature to be added to the message header for each email you send. This signature is specific for your domain and is generated by a private key. The corresponding public key is added to a DNS record for your domain.</p>
<p>When an email server receives your email, it checks the public key to determine if your private key was used to generate the email signature. If your private key was not used, the email is considered to be a phishing or spam attempt.</p>
<p>The diagram below will make you understand about DKIM authentication process.</p>
<p><img alt="" src="../images/dkim-process.png"/></p>
<h3 id="creating-a-dkim-key-and-dns-record">Creating a DKIM Key and DNS Record<a class="headerlink" href="#creating-a-dkim-key-and-dns-record" title="Permanent link">¶</a></h3>
<p>It is highly recommended to create a <strong>DKIM</strong> TXT record in your **openemal UI##  and set the corresponding TXT record in your DNS records. Please refer to <a href="http://www.opendkim.org">OpenDKIM</a> for further reading.</p>
<h3 id="creating-dkim-key-in-openemail-ui">Creating DKIM key in Openemail UI<a class="headerlink" href="#creating-dkim-key-in-openemail-ui" title="Permanent link">¶</a></h3>
<p>Do the following steps  which are marked in red color in the  configuration window screenshot of <strong>openemail-UI</strong> below.</p>
<p><strong>1.</strong> Click on <code>Select domains with missing keys</code> to select your domain.</p>
<p><strong>2.</strong> Set <code>dkim</code> key length as <code>2048</code></p>
<p><strong>3.</strong> Leave the DKIM selector as it is</p>
<p><strong>4.</strong> Press <code>Add</code> button</p>
<p><img alt="" src="../images/openemail-dkim-add.png"/></p>
<h3 id="using-opendkim">Using OpenDKIM<a class="headerlink" href="#using-opendkim" title="Permanent link">¶</a></h3>
<p>The below steps can be used to create DKIM key in you Linux command line in case if you are using your own mail server like postfix. You do not need to execute commands below when you deploy <strong>openemal</strong>. We have listed those commands to understand how the postfix back-end has been configured for DKIM validations.</p>
<p><strong>Install required tools</strong>
<div class="codehilite"><pre><span></span>sudo apt-get install opendkim opendkim-tools
</pre></div>
<strong>Create the _domainkey</strong></p>
<p>Now create DKIM key pair using <code>opendkim-genkey</code> command line utility. For this guide we are using domain name <code>openemail.io</code>, Change this name with your actual domain name.</p>
<p><div class="codehilite"><pre><span></span>mkdir -p dkim-keys/openemail.io
cd dkim-keys/openemail.io
opendkim-genkey -t -s dkim -d openemail.io
cat dkim.txt
</pre></div>
You will get an output like below. It is actually the TXT record for <code>bind</code> and compatible DNS servers.
<div class="codehilite"><pre><span></span>dkim._domainkey IN  TXT ( "v=DKIM1; h=sha256; k=rsa; t=y; "
      "p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAtIfYQWd16SotLpDAIe+9CRda6+KmExTSM4lQsO8XsbJsECqEuUer+xrJTVA4N5tEM53MeuH36tCjsKynlKMKmNQtMpblg3fHL0Z57FUyAUoHO9GOK1lS8vOA5wbf68FQ06YHAd/Dgq21/sYrERnnXYVvH5jSA44YBfiwrvuzopl/ekMp71WJMR73TmEQ1BTf6SZA6STvCJVj8d"
      "pAuLekL1EYQzsGsp1kcOFYOee9c9VjfgkuZnJkAkQmz94L3YTd/08i6rZrKUSRXcx8dfitx7k12IrBsKCqlXgRIpWYWJW58gAM1Fif6gjDmugj4mAIQJ4oyWJdNDZPYpKEG+6VQQIDAQAB" )  ; ----- DKIM key dkim for openemail.io
</pre></div></p>
<h2 id="setup-dmarc-record">Setup DMARC Record<a class="headerlink" href="#setup-dmarc-record" title="Permanent link">¶</a></h2>
<p>DMARC defines how your domain handles suspicious emails.</p>
<p>Spammers can forge the "From" address on email messages to make messages appear to come from someone in your domain. If spammers use your domain to send spam or junk email, your domain quality is negatively affected. People who get the forged emails can mark them as spam or junk, which can impact authentic messages sent from your domain.</p>
<p>Use DMARC to define the policy for how <strong>openemail</strong> handles spam emails that appear to be sent from your domain.</p>
<p>Learn more about <a href="https://dmarc.org/overview/">DMARC</a>.</p>
<h3 id="sample-dmarc-record">Sample DMARC Record<a class="headerlink" href="#sample-dmarc-record" title="Permanent link">¶</a></h3>
<p>You can setup a TXT record for your domains' DMARC using the example below.</p>
<p><div class="codehilite"><pre><span></span>_dmarc    IN    TXT   "v=DMARC1; p=quarantine; pct=5; rua=mailto:postmaster@yourdomain.tld"
</pre></div>
Following are the descriptions of the parameters used in the above record.</p>
<ul>
<li>p   - Policy for organizational domain</li>
<li>pct - Percentage of messages subjected to filtering</li>
<li>rua - Reporting URI of aggregate reports</li>
</ul>
<p><strong>To query DNS for an existing entry you can run:</strong></p>
<p><div class="codehilite"><pre><span></span>dig TXT _dmarc.openemail.io  +short
</pre></div>
You will get an output like below.</p>
<div class="codehilite"><pre><span></span>"v=DMARC1; p=quarantine; pct=5; rua=mailto:postmaster@openemail.io"
</pre></div>
<h2 id="the-advanced-dns-configuration">The Advanced DNS Configuration<a class="headerlink" href="#the-advanced-dns-configuration" title="Permanent link">¶</a></h2>
<p><strong>SRV</strong> records specify the server(s) for a specific protocol on your domain. If you want to explicitly announce a service as not provided, give "." as the target address (instead of "mail.yourdomain.tld."). Please refer to <a href="https://tools.ietf.org/html/rfc2782">RFC 2782</a>. for more details.</p>
<div class="codehilite"><pre><span></span>_imap._tcp          IN SRV     0 1 143   mail.yourdomain.tld.
_imaps._tcp         IN SRV     0 1 993   mail.yourdomain.tld.
_pop3._tcp          IN SRV     0 1 110   mail.yourdomain.tld.
_pop3s._tcp         IN SRV     0 1 995   mail.yourdomain.tld.
_submission._tcp    IN SRV     0 1 587   mail.yourdomain.tld.
_smtps._tcp         IN SRV     0 1 465   mail.yourdomain.tld.
_sieve._tcp         IN SRV     0 1 4190  mail.yourdomain.tld.
_autodiscover._tcp  IN SRV     0 1 443   mail.yourdomain.tld.
_carddavs._tcp      IN SRV     0 1 443   mail.yourdomain.tld.
_carddavs._tcp      IN TXT     "path=/SOGo/dav/"
_caldavs._tcp       IN SRV     0 1 443   mail.yourdomain.tld.
_caldavs._tcp       IN TXT     "path=/SOGo/dav/"
</pre></div>
<h2 id="testing-for-spf-dkim-and-dmarc">Testing for SPF, DKIM, and DMARC<a class="headerlink" href="#testing-for-spf-dkim-and-dmarc" title="Permanent link">¶</a></h2>
<p>Here are some tools you can use to verify your DNS configuration:</p>
<ul>
<li><a href="https://mxtoolbox.com/SuperTool.aspx">MX Toolbox</a> (DNS, SMTP, RBL)</li>
<li><a href="https://www.port25.com/dkim-wizard/">port25.com</a> (DKIM, SPF)</li>
<li><a href="https://www.mail-tester.com/">Mail-tester</a> (DKIM, DMARC, SPF)</li>
<li><a href="https://www.dmarcanalyzer.com/spf/checker/">DMARC Analyzer</a> (DMARC, SPF)</li>
</ul>
<h2 id="getting-additional-statistics">Getting Additional Statistics<a class="headerlink" href="#getting-additional-statistics" title="Permanent link">¶</a></h2>
<p>If you are interested in statistics, you can additionally register with the <a href="https://gmail.com/postmaster">Postmaster Tool</a>  by Google and supply a <strong>google-site-verification</strong> TXT record, which will give you details about spam-classified mails by your domain. This is clearly optional. You can add a TXT records in your DNS server like the one below.</p>
<div class="codehilite"><pre><span></span>@                   IN TXT     "google-site-verification=..."
</pre></div>
<h2 id="additional-references">Additional References<a class="headerlink" href="#additional-references" title="Permanent link">¶</a></h2>
<ul>
<li>A good article covering all relevant topics:
  <a href="https://www.rackaid.com/blog/email-dns-records">"3 DNS Records Every Email Marketer Must Know"</a></li>
<li>Another great one, but Zimbra as an example platform:
  <a href="https://wiki.zimbra.com/wiki/Best_Practices_on_Email_Protection:_SPF,_DKIM_and_DMARC">"Best Practices on Email Protection: SPF, DKIM and DMARC"</a></li>
<li>An in-depth discussion of SPF, DKIM and DMARC:
  <a href="https://www.skelleton.net/2015/03/21/how-to-eliminate-spam-and-protect-your-name-with-dmarc/">"How to eliminate spam and protect your name with DMARC"</a></li>
</ul>
<div class="footnote">
<hr/>
<ol>
<li id="fn:1">
<p>A <strong>Fully Qualified Domain Name</strong> (<strong>FQDN</strong>) is the complete (absolute) domain name for a specific computer or host, on the Internet. The FQDN consists of at least three parts divided by a dot: the hostname (myhost), the domain name (mydomain) and the top level domain in short <strong>tld</strong> (com). In the example of <code>mx.openemail.io</code> the hostname would be <code>mx</code>, the domain name 'openemal' and the tld is <code>io</code>. <a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../prerequisite-system/" rel="prev" title="Prepare Your System">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Prepare Your System
              </span>
</div>
</a>
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../install/" rel="next" title="Installation">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Installation
              </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright 2019 Chinthaka Deshapriya
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
</div>
<div class="md-footer-social">
<link href="../assets/fonts/font-awesome.css" rel="stylesheet"/>
<a class="md-footer-social__link fa fa-globe" href="https://openemail.io"></a>
<a class="md-footer-social__link fa fa-github-alt" href="https://docs.openemail.io"></a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/application.d9aa80ab.js"></script>
<script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
<script src="../clients.js"></script>
</body>
</html>